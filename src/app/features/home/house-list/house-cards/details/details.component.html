<article class="page-container" *ngIf="housingLocation">
  <!-- Seção da imagem e descrição -->
  <img
    class="listing-photo housing-image"
    [src]="housingLocation.photo"
    alt="Exterior photo of {{ housingLocation.name }}"
  />

  <section class="listing-description" *ngIf="housingLocation">
    <h2 class="listing-heading">{{ housingLocation.name }}</h2>
    <p class="listing-location">
      {{ housingLocation.city }}, {{ housingLocation.state }}
    </p>
  </section>

  <!-- Seção de informações adicionais -->
  <section class="listing-features">
    <h2 class="section-heading">About this housing location</h2>
    <ul>
      <li>✔ Units available: {{ housingLocation.availableUnits }}</li>
      <li>✔ Does this location have wifi: {{ housingLocation.wifi }}</li>
      <li>✔ Does this location have laundry: {{ housingLocation.laundry }}</li>
    </ul>
  </section>

  <!-- Formulário de aplicação -->
  <section class="listing-apply">
    <h2 class="section-heading">Apply now to live here</h2>
    <form
      class="apply-form"
      [formGroup]="applyForm"
      (submit)="submitApplication()"
    >
      <label for="name">Name</label>
      <input id="name" type="text" formControlName="name" class="form-input" />

      <label for="email">Email</label>
      <input
        id="email"
        type="email"
        formControlName="email"
        class="form-input"
      />

      <label for="phone">Phone</label>
      <input
        id="phone"
        type="text"
        formControlName="phone"
        class="form-input"
      />

      <label for="location">Location</label>
      <input
        id="location"
        type="text"
        formControlName="location"
        class="form-input"
      />

      <!-- SELL -->
      <ng-container *ngIf="housingLocation?.typeOfBusiness === 'sell'">
        <label for="visit-date">Date of Visit</label>
        <input
          id="visit-date"
          type="date"
          formControlName="visitDate"
          class="form-input"
          [min]="today"
        />

        <label for="visit-time">Visit Time</label>
        <mat-form-field class="full-width">
          <mat-select formControlName="visitTime" required>
            <mat-option value="" disabled>Select a time</mat-option>
            <mat-option *ngFor="let hour of visitHours" [value]="hour">
              {{ hour }}
            </mat-option>
          </mat-select>
        </mat-form-field>
      </ng-container>

      <!-- RENT -->
      <ng-container *ngIf="housingLocation?.typeOfBusiness === 'rent'">
        <label for="check-in-date">Check-in Date</label>
        <input
          id="check-in-date"
          type="date"
          formControlName="checkInDate"
          class="form-input"
          [min]="today"
        />

        <label for="check-out-date">Check-out Date</label>
        <input
          id="check-out-date"
          type="date"
          formControlName="checkOutDate"
          class="form-input"
          [min]="applyForm.get('checkInDate')?.value || today"
        />
      </ng-container>

      <button type="submit" class="primary">Apply now</button>
    </form>
  </section>
</article>

<!-- Seção de Reviews agora usa o componente app-reviews -->
<app-reviews
  *ngIf="housingLocation?.id"
  [housingLocationId]="housingLocation!.id"
  [currentUser]="currentUser"
></app-reviews>

<div *ngIf="!housingLocation" class="loading-details">
  <p>Loading housing details...</p>
  <!-- Você pode adicionar um spinner aqui se desejar -->
</div>
